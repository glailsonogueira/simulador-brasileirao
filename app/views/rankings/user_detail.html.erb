<% content_for :title, "Desempenho - #{@user.name}" %>
<%= breadcrumb ["Início", root_path], ["Rankings", rankings_path], @user.name %>

<h1>Desempenho: <%= @user.name %></h1>
<%= link_to "← Voltar para Ranking", rankings_path, class: "btn", style: "margin-bottom: 20px;" %>

<div class="card">
  <h2>Resumo Geral</h2>
  <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 20px 0;">
    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 5px;">
      <h3 style="font-size: 36px; color: #000080; margin: 10px 0;"><%= @overall_standing&.total_points || 0 %></h3>
      <p style="color: #666;">Pontos Totais</p>
    </div>
    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 5px;">
      <h3 style="font-size: 36px; color: #28a745; margin: 10px 0;"><%= @overall_standing&.rounds_won || 0 %></h3>
      <p style="color: #666;">Rodadas Vencidas</p>
    </div>
    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 5px;">
      <h3 style="font-size: 36px; color: #ffc107; margin: 10px 0;"><%= @overall_standing&.position || '-' %>º</h3>
      <p style="color: #666;">Posição Geral</p>
    </div>
  </div>
</div>

<div class="card">
  <h2>Desempenho por Rodada</h2>
  <table>
    <thead>
      <tr>
        <th>Rodada</th>
        <th>Pontos</th>
        <th>Posição</th>
        <th>Placares Exatos</th>
        <th>Resultados Corretos</th>
      </tr>
    </thead>
    <tbody>
      <% @round_scores.each do |score| %>
        <tr>
          <td><strong>Rodada <%= score.round.number %></strong></td>
          <td><%= score.total_points %></td>
          <td><%= score.position %>º</td>
          <td><%= score.exact_scores %></td>
          <td><%= score.correct_results %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
