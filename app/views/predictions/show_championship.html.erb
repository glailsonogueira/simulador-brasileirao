<% content_for :title, t("navigation.predictions") %>
<%= breadcrumb [t("navigation.home"), root_path], [t("navigation.predictions"), predictions_path], @championship.full_name %>

<div style="text-align: center; margin-bottom: 30px;">
  <h1 style="color: #000080;">Previsoes</h1>
  <p style="font-size: 18px; color: #666; margin-top: 10px;">
    <strong><%= @championship.full_name %></strong>
  </p>
  <div style="margin-top: 15px;">
    <%= link_to t("actions.back"), predictions_path, class: "btn" %>
  </div>
</div>

<div class="card">
  <h2 style="text-align: center; margin-bottom: 20px;">Selecione uma Rodada</h2>
  
  <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
    <% @rounds.each do |round| %>
      <% status = round.status_for_user(current_user) %>
      <% can_access = round.can_access_predictions? %>
      
      <% if can_access %>
        <%= link_to round_prediction_path(championship_id: @championship.id, round_id: round.id), style: "text-decoration: none;" do %>
          <div class="card" style="background: #f8f9fa; text-align: center; padding: 20px; transition: transform 0.2s;">
            <h3 style="color: #000080; margin-bottom: 15px; font-size: 20px;">
              Rodada <%= round.number %>
            </h3>
            
            <p style="color: <%= round.status_color_for_user(current_user) %>; font-weight: bold; margin-bottom: 10px;">
              <%= round.status_label_for_user(current_user) %>
            </p>
            
            <div style="font-size: 12px; color: #666; margin-top: 10px;">
              <%= round.matches.count %> partida(s)
            </div>
            
            <div style="margin-top: 15px; color: #000080; font-weight: bold;">
              Ver Rodada &#8594;
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="card" style="background: #f8f9fa; text-align: center; padding: 20px; opacity: 0.5; cursor: not-allowed;">
          <h3 style="color: #000080; margin-bottom: 15px; font-size: 20px;">
            Rodada <%= round.number %>
          </h3>
          
          <p style="color: <%= round.status_color_for_user(current_user) %>; font-weight: bold; margin-bottom: 10px;">
            <%= round.status_label_for_user(current_user) %>
          </p>
          
          <div style="font-size: 12px; color: #666; margin-top: 10px;">
            <%= round.matches.count %> partida(s)
          </div>
          
          <div style="margin-top: 15px; color: #999; font-weight: bold;">
            &#128274; Bloqueada
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
